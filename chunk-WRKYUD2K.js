import{a as k}from"./chunk-A4NTIKTH.js";import{a as w}from"./chunk-T32ATWVE.js";import{a as E,b as p,c as x,d as C,g as _,h as U,i as F,j as N,k as D,l as A}from"./chunk-NQUXY33H.js";import{r as y}from"./chunk-EMUXDAZT.js";import{Aa as m,Ma as a,Oa as u,Z as l,ca as n,ea as h,ia as S,jb as v,mb as b,sa as c,ta as r,ua as o,va as s,yb as I}from"./chunk-QQJZZCOM.js";function q(d,i){d&1&&(r(0,"div",20),a(1," Icon Image is required "),o())}var V=class d{constructor(i,e,t,f,g){this.toastr=i;this.fb=e;this.route=t;this.dashboardService=f;this.socialService=g}addSocial;isEdit=!1;editSocial=null;selectedImage=null;ngOnInit(){this.initForms();let i=this.route.snapshot.params.id;i&&(this.isEdit=!0,this.editSocial=+i,this.getSocialIconDetails(this.editSocial))}initForms(){this.addSocial=this.fb.group({link:["",p.required],iconImageUrl:[null],name:["",p.required]})}getSocialIconDetails(i){this.dashboardService.GetOnlyOneIcon(i).subscribe({next:e=>{e&&e.id===i?(this.addSocial.patchValue({link:e.link,name:e.name}),this.addSocial.get("iconImageUrl")?.clearValidators(),this.addSocial.get("iconImageUrl")?.updateValueAndValidity()):this.toastr.error("Icon not found")},error:()=>{this.toastr.error("Error loading social icon details")}})}onImageChange(i){let e=i.target.files[0];e&&(this.selectedImage=e)}onSubmit(){if(this.addSocial.get("link")?.invalid||this.addSocial.get("name")?.invalid){this.toastr.warning("Please fill all required fields");return}if(!this.isEdit&&!this.selectedImage){this.toastr.warning("Please select an image for a new icon");return}let i=this.addSocial.value,e=new FormData;e.append("link",i.link),e.append("name",i.name),this.selectedImage&&e.append("iconImageUrl",this.selectedImage),this.isEdit&&this.editSocial?this.dashboardService.UpdateSocial(e,this.editSocial).subscribe({next:()=>{this.toastr.success("Social icon updated successfully"),this.loadUpdatedIcons()},error:t=>{this.toastr.error(t.error?.message||"Something went wrong")}}):this.dashboardService.CreateSocial(e).subscribe({next:()=>{this.toastr.success("Social icon added successfully"),this.addSocial.reset(),this.selectedImage=null,this.loadUpdatedIcons()},error:t=>{this.toastr.error(t.error?.message||"Something went wrong")}})}loadUpdatedIcons(){this.dashboardService.GetAllSocial().subscribe({next:i=>{this.socialService.updateSocialIcons(i)},error:()=>{this.toastr.error("Error loading updated icons")}})}static \u0275fac=function(e){return new(e||d)(n(y),n(D),n(I),n(w),n(k))};static \u0275cmp=h({type:d,selectors:[["app-social"]],decls:27,vars:4,consts:[[1,"this"],[1,"row","total","g-4"],[1,"col-lg-7"],[1,"card","shadow-lg","border-0","rounded-lg"],[1,"card-header","bg-primary","text-white","text-center","py-4","rounded-top"],[1,"mb-0"],[1,"fas","fa-box-open","me-2"],[1,"card-body","p-4"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","Link",1,"form-label","fw-bold","w-100",2,"text-align","right !important"],["id","Link","type","url","formControlName","link","placeholder","Enter the URL for the icon","required","",1,"form-control","form-control-lg"],["for","name",1,"form-label","fw-bold","w-100",2,"text-align","right !important"],["id","name","type","text","formControlName","name","placeholder","Enter Name for the icon","required","",1,"form-control","form-control-lg"],["for","IconImageUrl",1,"form-label","fw-bold","w-100",2,"text-align","right !important"],["type","file","id","IconImageUrl","formControlName","iconImageUrl","accept","image/*","required","",1,"form-control","form-control-lg",3,"change"],["class","text-danger",4,"ngIf"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary","btn-lg"],[1,"fas","fa-plus-circle","me-2"],[1,"text-danger"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),s(6,"i",6),a(7),o()(),r(8,"div",7)(9,"form",8),m("ngSubmit",function(){return t.onSubmit()}),r(10,"div",9)(11,"label",10),a(12,"\u0644\u0646\u0643 \u0627\u0644\u0627\u064A\u0642\u0648\u0646"),o(),s(13,"input",11),o(),r(14,"div",9)(15,"label",12),a(16,"\u0627\u0633\u0645 \u0627\u0644\u0627\u064A\u0642\u0648\u0646"),o(),s(17,"input",13),o(),r(18,"div",9)(19,"label",14),a(20,"\u0635\u0648\u0631\u0629 \u0627\u0644\u0627\u064A\u0642\u0648\u0646"),o(),r(21,"input",15),m("change",function(g){return t.onImageChange(g)}),o()(),S(22,q,2,0,"div",16),r(23,"div",17)(24,"button",18),s(25,"i",19),a(26),o()()()()()()()()),e&2&&(l(7),u(" ",t.isEdit?"Update Social Icon":"Add New Social Icon"," "),l(2),c("formGroup",t.addSocial),l(13),c("ngIf",!t.selectedImage&&!t.isEdit),l(4),u(" ",t.isEdit?"Update Social Icon":"Add Social Icon"," "))},dependencies:[A,_,E,x,C,N,U,F,b,v],styles:[".this[_ngcontent-%COMP%]{margin-top:70px}.total[_ngcontent-%COMP%]{width:150%;justify-content:center}"]})};export{V as Social};
