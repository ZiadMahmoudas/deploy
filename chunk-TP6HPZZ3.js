import{a as k}from"./chunk-TEAXPDQI.js";import{a as D,b as o,c as F,d as U,e as W,f as p,g as N,h as q,i as B,l as M}from"./chunk-63W4S3H5.js";import{b as A,r as V}from"./chunk-346U2K3F.js";import{Ba as f,Ca as v,G as I,Na as n,Pa as y,X as b,_ as u,da as h,fa as _,fb as T,ja as g,kb as E,nb as C,ta as d,ua as a,va as i,wa as c,zb as w}from"./chunk-2ANHLOEF.js";function P(r,l){r&1&&(a(0,"div",33),n(1," Title is required "),i())}function z(r,l){r&1&&(a(0,"div",33),n(1," Header is required "),i())}function G(r,l){r&1&&(a(0,"div",33),n(1," SmallTitle is required "),i())}function R(r,l){r&1&&(a(0,"div",33),n(1," TextButton is required "),i())}function j(r,l){if(r&1&&c(0,"img",34),r&2){let e=v();d("src",e.imageApi+e.existingImageUrl,b)}}function H(r,l){if(r&1&&c(0,"img",35),r&2){let e=v();d("src",e.imageApi+e.existingThumbnailUrl,b)}}function L(r,l){if(r&1&&c(0,"img",36),r&2){let e=v();d("src",e.imageApi+e.existingFullScreenImageUrl,b)}}var O=class r{constructor(l,e,t,m){this.toastr=l;this.dashboardService=e;this.route=t;this.cdr=m;this.addSlider=new W({title:new p("",[o.required]),header:new p("",[o.required]),smallTitle:new p("",[o.required]),image:new p(null,[o.required]),thumbnails:new p(null,[o.required]),fullScreenImage:new p(null,[o.required]),textButton:new p("\u0627\u0644\u0645\u0632\u064A\u062F \u0645\u0646 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644")})}imageApi=I(A);sliders=[];isEdit=!1;editId=null;selectedImage=null;selectedThumbnail=null;selectedFullScreenImage=null;addSlider;existingImageUrl=null;existingThumbnailUrl=null;existingFullScreenImageUrl=null;ngOnInit(){this.loadSliders(),this.route.params.subscribe(l=>{let e=l.id;e?(this.isEdit=!0,this.editId=e,this.getSlider(e)):(this.isEdit=!1,this.editId=null,this.addSlider.get("title")?.setValue(""),this.addSlider.get("header")?.setValue(""),this.addSlider.get("textButton")?.setValue("\u0627\u0644\u0645\u0632\u064A\u062F \u0645\u0646 \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644"),this.addSlider.get("smallTitle")?.setValue(""),this.addSlider.get("image")?.setValidators([o.required]),this.addSlider.get("thumbnails")?.setValidators([o.required]),this.addSlider.get("fullScreenImage")?.setValidators([o.required])),this.addSlider.get("image")?.updateValueAndValidity(),this.addSlider.get("thumbnails")?.updateValueAndValidity(),this.addSlider.get("fullScreenImage")?.updateValueAndValidity()})}getSlider(l){this.dashboardService.GetOnlyOneWorker(l).subscribe({next:e=>{let t={title:e.title,header:e.header,textButton:e.textButton,smallTitle:e.smallTitle};this.addSlider.patchValue(t),this.existingImageUrl=e.image,this.existingThumbnailUrl=e.thumbnails,this.existingFullScreenImageUrl=e.fullScreenImage,this.addSlider.get("image")?.clearValidators(),this.addSlider.get("thumbnails")?.clearValidators(),this.addSlider.get("fullScreenImage")?.clearValidators(),this.addSlider.get("image")?.updateValueAndValidity(),this.addSlider.get("thumbnails")?.updateValueAndValidity(),this.addSlider.get("fullScreenImage")?.updateValueAndValidity(),this.cdr.detectChanges()},error:e=>{this.toastr.error("Error loading slider data")}})}loadSliders(){this.dashboardService.GetAllSliderWork().subscribe({next:l=>{this.sliders=l},error:()=>{this.toastr.error("Error loading sliders")}})}onImageChange(l,e){let t=l.target.files[0];if(t)switch(e){case"image":this.selectedImage=t,this.addSlider.get("image")?.setValue(t);break;case"thumbnails":this.selectedThumbnail=t,this.addSlider.get("thumbnails")?.setValue(t);break;case"fullScreenImage":this.selectedFullScreenImage=t,this.addSlider.get("fullScreenImage")?.setValue(t);break}}onSubmit(){if(this.isEdit||(this.addSlider.get("image")?.markAsTouched(),this.addSlider.get("thumbnails")?.markAsTouched(),this.addSlider.get("fullScreenImage")?.markAsTouched()),this.addSlider.invalid){this.toastr.warning("Please fill all required fields");return}let l=this.addSlider.value,e=new FormData;if(e.append("header",l.header),e.append("title",l.title),e.append("textButton",l.textButton),e.append("smallTitle",l.smallTitle),this.selectedImage&&e.append("image",this.selectedImage),this.selectedThumbnail&&e.append("thumbnails",this.selectedThumbnail),this.selectedFullScreenImage&&e.append("fullScreenImage",this.selectedFullScreenImage),this.isEdit&&this.editId)this.dashboardService.UpdateSliderWork(this.editId,e).subscribe({next:()=>{this.toastr.success("Slider updated successfully")},error:t=>{this.toastr.error(t.error?.message||"Something went wrong during update")}});else{if(!this.selectedImage||!this.selectedThumbnail||!this.selectedFullScreenImage){this.toastr.error("Please select all three images to create a new slider");return}this.dashboardService.CreateSliderWork(e).subscribe({next:()=>{this.toastr.success("Slider added successfully"),this.addSlider.reset(),this.selectedImage=null,this.selectedThumbnail=null,this.selectedFullScreenImage=null},error:t=>{this.toastr.error(t.error?.message||"Something went wrong during creation")}})}}static \u0275fac=function(e){return new(e||r)(h(V),h(k),h(w),h(T))};static \u0275cmp=_({type:r,selectors:[["app-slider-works"]],decls:51,vars:10,consts:[[1,"this"],[1,"row","total","g-4"],[1,"col-lg-7"],[1,"card","shadow-lg","border-0","rounded-lg"],[1,"card-header","bg-primary","text-white","text-center","rounded-top"],[1,"mb-0"],[1,"fas","fa-box-open","me-2"],[1,"card-body","p-4"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"form-group","col-6"],["for","title"],["type","text","id","title","formControlName","title","placeholder","Enter slider title",1,"form-control"],["class","text-danger",4,"ngIf"],["for","header"],["type","text","id","header","formControlName","header","placeholder","Enter slider header",1,"form-control"],[1,"form-group"],["for","smallTitle"],["type","text","id","smallTitle","formControlName","smallTitle","placeholder","Enter slider smallTitle",1,"form-control"],["for","textButton"],["type","text","id","textButton","formControlName","textButton","placeholder","Enter slider textButton",1,"form-control"],[1,"form-group","form-group1"],[1,"d-flex","flex-column"],["for","image"],["type","file","id","image","formControlName","image",1,"form-control",3,"change"],["loading","lazy","alt","\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u0639\u0627\u0631 \u0627\u0644\u062D\u0627\u0644\u064A\u0629","style","max-width: 150px; margin-top: 10px; border-radius: 5px; border: 1px solid #ccc;",3,"src",4,"ngIf"],["for","thumbnails"],["type","file","id","thumbnails","formControlName","thumbnails",1,"form-control",3,"change"],["loading","lazy","alt","\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0635\u063A\u0631\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629","style","max-width: 150px; margin-top: 10px; border-radius: 5px; border: 1px solid #ccc;",3,"src",4,"ngIf"],["for","fullScreenImage"],["type","file","id","fullScreenImage","formControlName","fullScreenImage",1,"form-control",3,"change"],["loading","lazy","alt","\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0643\u0628\u064A\u0631\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629","style","max-width: 150px; margin-top: 10px; border-radius: 5px; border: 1px solid #ccc;",3,"src",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger"],["loading","lazy","alt","\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u0639\u0627\u0631 \u0627\u0644\u062D\u0627\u0644\u064A\u0629",2,"max-width","150px","margin-top","10px","border-radius","5px","border","1px solid #ccc",3,"src"],["loading","lazy","alt","\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0635\u063A\u0631\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629",2,"max-width","150px","margin-top","10px","border-radius","5px","border","1px solid #ccc",3,"src"],["loading","lazy","alt","\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0643\u0628\u064A\u0631\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629",2,"max-width","150px","margin-top","10px","border-radius","5px","border","1px solid #ccc",3,"src"]],template:function(e,t){if(e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),c(6,"i",6),n(7),i()(),a(8,"div",7)(9,"form",8),f("ngSubmit",function(){return t.onSubmit()}),a(10,"div",9)(11,"div",10)(12,"label",11),n(13,"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"),i(),c(14,"input",12),g(15,P,2,0,"div",13),i(),a(16,"div",10)(17,"label",14),n(18,"\u0627\u0633\u0645 \u0627\u0644\u0628\u0627\u0642\u0629"),i(),c(19,"input",15),g(20,z,2,0,"div",13),i()(),a(21,"div",16)(22,"label",17),n(23,"\u0627\u0644\u0645\u062D\u062A\u0648\u064A"),i(),c(24,"textarea",18),g(25,G,2,0,"div",13),i(),a(26,"div",16)(27,"label",19),n(28,"\u0646\u0635 \u0627\u0644\u0632\u0631\u0627\u0631"),i(),c(29,"input",20),g(30,R,2,0,"div",13),i(),a(31,"div",21)(32,"div",22)(33,"label",23),n(34,"\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u0639\u0627\u0631"),i(),a(35,"input",24),f("change",function(s){return t.onImageChange(s,"image")}),i()(),g(36,j,1,1,"img",25),i(),a(37,"div",21)(38,"div",22)(39,"label",26),n(40,"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0635\u063A\u0631\u0629"),i(),a(41,"input",27),f("change",function(s){return t.onImageChange(s,"thumbnails")}),i()(),g(42,H,1,1,"img",28),i(),a(43,"div",21)(44,"div",22)(45,"label",29),n(46,"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0643\u0628\u064A\u0631\u0629"),i(),a(47,"input",30),f("change",function(s){return t.onImageChange(s,"fullScreenImage")}),i()(),g(48,L,1,1,"img",31),i(),a(49,"button",32),n(50,"Submit"),i()()()()()()()),e&2){let m,s,S,x;u(7),y(" ",t.isEdit?"Update ContentHomeSlider":"Create ContentHomeSlider"," "),u(2),d("formGroup",t.addSlider),u(6),d("ngIf",((m=t.addSlider.get("title"))==null?null:m.invalid)&&((m=t.addSlider.get("title"))==null?null:m.touched)),u(5),d("ngIf",((s=t.addSlider.get("header"))==null?null:s.invalid)&&((s=t.addSlider.get("header"))==null?null:s.touched)),u(5),d("ngIf",((S=t.addSlider.get("smallTitle"))==null?null:S.invalid)&&((S=t.addSlider.get("smallTitle"))==null?null:S.touched)),u(5),d("ngIf",((x=t.addSlider.get("textButton"))==null?null:x.invalid)&&((x=t.addSlider.get("textButton"))==null?null:x.touched)),u(6),d("ngIf",t.isEdit&&t.existingImageUrl),u(6),d("ngIf",t.isEdit&&t.existingThumbnailUrl),u(6),d("ngIf",t.isEdit&&t.existingFullScreenImageUrl),u(),d("disabled",t.addSlider.invalid)}},dependencies:[M,N,D,F,U,q,B,C,E],styles:[".this[_ngcontent-%COMP%]{margin-top:70px}.total[_ngcontent-%COMP%]{width:100%;direction:rtl}.form-group1[_ngcontent-%COMP%]{display:flex;gap:5px;width:100%}.form-group1[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5%}@media (min-width: 768px){.total[_ngcontent-%COMP%]{width:164%;justify-content:flex-end}}"]})};export{O as SliderWorks};
