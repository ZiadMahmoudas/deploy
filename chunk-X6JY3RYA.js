import{a as Y,b as Q,c as G}from"./chunk-GJY3UEER.js";import{a as X}from"./chunk-RS2GEYJU.js";import{a as z}from"./chunk-G5KA7DMQ.js";import{a as N}from"./chunk-V6KGQEPR.js";import{a as $}from"./chunk-T32ATWVE.js";import{b as L,f as R,g as w,h as B,j as h,l as q,m as O,n as F,r as U}from"./chunk-EMUXDAZT.js";import{Aa as g,Ab as j,Ba as d,Da as y,Ea as b,Fa as S,G as M,I as u,J as f,Ma as a,Na as C,Ra as T,X as P,Y as I,Z as c,ca as p,e as W,ea as V,eb as A,ia as v,jb as H,mb as D,qa as k,ra as E,sa as m,ta as o,ua as r,va as x,ya as _}from"./chunk-QQJZZCOM.js";var J=W(X());var Z=["carousel"],ee=["backgroundVideo"],te=(s,e)=>e.id;function ie(s,e){if(s&1){let t=_();o(0,"button",26),g("click",function(){u(t);let n=d(2).$implicit,l=d(2);return f(l.deleteSlider(n.id))}),a(1,"Remove"),r()}}function ne(s,e){if(s&1){let t=_();o(0,"button",27),g("click",function(){u(t);let n=d(2).$implicit,l=d(2);return f(l.goToUpdateSlider(n.id))}),a(1,"Update"),r()}}function oe(s,e){if(s&1&&(o(0,"div",18)(1,"div",19),x(2,"img",20),r(),o(3,"div",21)(4,"h3",22),a(5),r(),o(6,"p"),a(7),r(),o(8,"div",23),v(9,ie,2,0,"button",24)(10,ne,2,0,"button",25),r()()()),s&2){let t=d().$implicit,i=d(2);c(2),m("src",T("",i.imageApi,"",t.imageUrl),P),c(3),C(t.title),c(2),C(t.header),c(2),m("ngIf",i.roles()),c(),m("ngIf",i.roles())}}function re(s,e){s&1&&v(0,oe,11,7,"ng-template",17)}function se(s,e){if(s&1){let t=_();o(0,"owl-carousel-o",16,1),g("changed",function(n){u(t);let l=d();return f(l.onSlideChange(n))}),k(2,re,1,0,null,17,te),r()}if(s&2){let t=d();m("options",t.customOptions),c(2),E(t.sliders)}}var K=class s{constructor(e,t,i,n,l){this.router=e;this.dashboardService=t;this.auth=i;this.toastr=n;this.cdr=l}imageApi=M(L);customOptions={loop:!0,dots:!0,autoplay:!0,autoplaySpeed:3e3,navSpeed:700,navText:['<img class="arrow" src="images/Vector1.svg">','<img class="arrow" src="images/Vector.svg">'],responsive:{0:{items:1,nav:!0,dots:!1},576:{items:1,nav:!0,dots:!0},750:{items:1,nav:!0,dots:!1},772:{items:1,nav:!0,dots:!0}},nav:!0,animateIn:"fadeIn",animateOut:"fadeOut",margin:0};carousel;backgroundVideo;ngAfterViewInit(){this.setupVideoBackground(),this.animateSlideContent(),this.GetAllSlider(),this.setupVideo()}onKeyDown(e){e.key==="ArrowRight"?this.moveToNextSlide():e.key==="ArrowLeft"&&this.moveToPreviousSlide()}moveToNextSlide(){this.carousel&&this.carousel.next()}moveToPreviousSlide(){this.carousel&&this.carousel.prev()}onSlideChange(e){setTimeout(()=>{this.animateSlideContent(e.startPosition)},100)}animateSlideContent(e=0){document.querySelectorAll(".slide-item").forEach(n=>{n.querySelector(".content-boxed")?.classList.remove("active"),n.querySelector(".slide-image")?.classList.remove("active")});let i=document.querySelector(".owl-item.active .slide-item");if(i){let n=i.querySelector(".content-boxed"),l=i.querySelector(".slide-image");n&&n.classList.add("active"),l&&l.classList.add("active")}}setupVideoBackground(){let e=this.backgroundVideo.nativeElement;requestAnimationFrame(()=>{e.addEventListener("ended",()=>{e.currentTime=0,e.play().catch(t=>{console.error("Error while trying to play the video: ",t)})})}),e.addEventListener("canplay",()=>{e.play().catch(t=>{console.error("Error while trying to play the video: ",t)})})}setVideoSpeed(e){this.backgroundVideo.nativeElement.playbackRate=e}setupVideo(){this.setVideoSpeed(.7)}onVideoLoaded(){let e=this.backgroundVideo.nativeElement;e.muted=!0,e.play().catch(t=>{console.error("Error while trying to play the video: ",t)})}sliders=[];ngOnInit(){this.startVisitorSession(),console.log("User is a regular visitor. Starting session tracking.")}ngOnDestroy(){this.roles()||this.endVisitorSession()}GetAllSlider(){this.dashboardService.GetAllSliderHome().subscribe({next:e=>{this.sliders=e,this.sliders.length===1?(this.customOptions.nav=!1,this.customOptions.loop=!1):(this.customOptions.nav=!0,this.customOptions.loop=!0),this.cdr.detectChanges()}})}roles(){let e="http://schemas.microsoft.com/ws/2008/06/identity/claims/role",t=this.auth.getAccessToken();if(!t||typeof t!="string"||t.trim()==="")return!1;try{let n=z(t)[e];return n==="Admin"||n==="Staff"}catch(i){return console.error("Error decoding token:",i),!1}}deleteSlider(e){J.default.fire({title:"Are you sure?",text:"Do you want to delete this slider?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&this.dashboardService.DeleteSliderHome(e).subscribe({next:()=>{this.sliders=this.sliders.filter(i=>i.id!==e),this.toastr.success("Slider deleted successfully")},error:()=>{this.toastr.error("Error deleting slider")}})})}goToUpdateSlider(e){this.router.navigate([`/Dashboard/slider-Home/${e}`])}startVisitorSession(){this.roles()||sessionStorage.getItem("sessionId")||this.dashboardService.startSession().subscribe({next:e=>{console.log("Visitor session started successfully."),sessionStorage.setItem("sessionId",e),sessionStorage.setItem("startTime",new Date().toISOString())},error:e=>{console.error("Error starting session:",e)}})}endVisitorSession(){let e=sessionStorage.getItem("sessionId"),t=sessionStorage.getItem("startTime");if(!e||!t){console.error("Session ID or Start Time not found in sessionStorage.");return}let i=parseInt(e,10);isNaN(i)?console.error("Invalid Session ID stored in sessionStorage."):this.dashboardService.endSession(i).subscribe({next:()=>{console.log("Session ended successfully. Data sent to backend."),sessionStorage.removeItem("sessionId"),sessionStorage.removeItem("startTime")},error:n=>{console.error("Error ending session:",n)}})}static \u0275fac=function(t){return new(t||s)(p(j),p($),p(N),p(U),p(A))};static \u0275cmp=V({type:s,selectors:[["app-home"]],viewQuery:function(t,i){if(t&1&&(y(Z,5),y(ee,5)),t&2){let n;b(n=S())&&(i.carousel=n.first),b(n=S())&&(i.backgroundVideo=n.first)}},hostBindings:function(t,i){t&1&&g("keydown",function(l){return i.onKeyDown(l)},I)},decls:27,vars:3,consts:[["backgroundVideo",""],["carousel",""],["autoplay","","loop","","muted","","playsinline","","preload","auto",1,"background-video",3,"loadeddata"],["src","videos/bg1.webm","type","video/webm"],["src","videos/bg.mp4","type","video/mp4"],["src","images/BG.webp","alt","",1,"bg"],[1,"container"],[1,"hero-section"],[1,"carousel-container","owl-theme","owl-carousel-one"],[3,"options","changed",4,"ngIf"],[1,"taif-logo-container"],[1,"logo-char","char-t"],[1,"logo-char","char-a"],[1,"logo-char","char-i"],[1,"logo-char","char-f"],[1,"title2"],[3,"changed","options"],["carouselSlide",""],[1,"slide-item","horizontal-slide"],[1,"slide-image"],["loading","lazy","alt","",1,"pic",3,"src"],[1,"content-boxed"],[1,"te-title"],[1,"margin"],["class","btn btn-danger remove",3,"click",4,"ngIf"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-danger","remove",3,"click"],[1,"btn","btn-warning",3,"click"]],template:function(t,i){if(t&1){let n=_();o(0,"video",2,0),g("loadeddata",function(){return u(n),f(i.onVideoLoaded())}),x(2,"source",3)(3,"source",4),r(),x(4,"img",5),o(5,"div",6)(6,"section",7)(7,"div",8),v(8,se,4,1,"owl-carousel-o",9),r()()(),o(9,"div",10)(10,"p",11),a(11,"T"),r(),o(12,"p",12),a(13,"A"),r(),o(14,"p",13),a(15,"I"),r(),o(16,"p",14),a(17,"F"),r()(),o(18,"div",15)(19,"p"),a(20,"T"),r(),o(21,"p"),a(22,"A"),r(),o(23,"p"),a(24,"I"),r(),o(25,"p"),a(26,"F"),r()()}t&2&&(c(8),m("ngIf",(i.sliders==null?null:i.sliders.length)>0),c(),m("@taifLogoAnimation",void 0),c(9),m("@taifLogoAnimation",void 0))},dependencies:[G,Q,Y,D,H],styles:[".horizontal-slide[_ngcontent-%COMP%]{display:flex;flex-direction:column!important;height:100vh;justify-content:unset}.slide-image[_ngcontent-%COMP%]{flex:0 0 50%;display:flex;justify-content:center;opacity:0;transform:translateY(50px);transition:transform 1s ease-out,opacity 1s ease-out}.slide-image.active[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.slide-image[_ngcontent-%COMP%]   .pic[_ngcontent-%COMP%]{height:auto;object-fit:contain}.content-boxed[_ngcontent-%COMP%]{flex:0 0 50%;display:flex;flex-direction:column;align-items:flex-end;text-align:right;opacity:0;transform:translate(-50px);transition:transform 1s ease-out,opacity 1s ease-out}.content-boxed.active[_ngcontent-%COMP%]{transform:translate(0);opacity:1}.owl-carousel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:cover}.carousel-container[_ngcontent-%COMP%]{position:relative;overflow:hidden}.te-title[_ngcontent-%COMP%]{color:orange;font-size:2.125rem;font-family:Bold;margin:0}.content-boxed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:1.15rem;font-family:Light;margin:0;width:100%;text-align:right;direction:rtl}.background-video[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:1;opacity:.15}.background-video.video-bg-dark[_ngcontent-%COMP%]{filter:brightness(.4) grayscale(.2)}.bg[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1;opacity:1}.taif-logo-container[_ngcontent-%COMP%]{position:absolute;z-index:100;top:20%;left:6%;font-size:1rem;color:#fff;opacity:1;transition:opacity 1s ease-in-out}.taif-logo-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px!important}.title2[_ngcontent-%COMP%]{position:absolute;z-index:100;left:95%;font-size:1rem;color:#fff;top:20%}.title2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:7px!important}.remove[_ngcontent-%COMP%]{position:relative;z-index:9999}.centered-spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;width:100vw;position:fixed;top:0;left:0;z-index:9999}.spinner[_ngcontent-%COMP%]{width:11.2px;height:11.2px;border-radius:11.2px;box-shadow:28px 0 #474bff33,22.7px 16.5px #474bff66,8.68px 26.6px #474bff99,-8.68px 26.6px #474bffcc,-22.7px 16.5px #474bff;animation:_ngcontent-%COMP%_spinner-b87k6z 1s infinite linear}@keyframes _ngcontent-%COMP%_spinner-b87k6z{to{transform:rotate(360deg)}}@media (min-width: 576px){.title2[_ngcontent-%COMP%]{top:67%}.content-boxed[_ngcontent-%COMP%]{gap:0}.slide-image[_ngcontent-%COMP%]{justify-content:center}.margin[_ngcontent-%COMP%]{margin-right:160px}}@media (min-width: 768px){.horizontal-slide[_ngcontent-%COMP%]{flex-direction:row!important;align-items:center}.slide-image[_ngcontent-%COMP%]{width:100%;opacity:0;display:flex;justify-content:flex-end;transform:translate(-50px);transition:transform 1s ease-out,opacity 1s ease-out;position:relative;left:unset}.slide-image.active[_ngcontent-%COMP%]{opacity:1;transform:translate(87px)}.content-boxed[_ngcontent-%COMP%]{flex:0 0 40%;text-align:right;padding:0;position:relative;align-items:flex-end;justify-content:center;opacity:0;transform:translateY(50px);transition:transform 1s ease-out,opacity 1s ease-out}.content-boxed.active[_ngcontent-%COMP%]{transform:translateY(0);opacity:1}}@media (min-width: 992px){.slide-image[_ngcontent-%COMP%]{left:0}.slide-image[_ngcontent-%COMP%]   .pic[_ngcontent-%COMP%]{width:130%;position:relative;margin-right:70px}.content-boxed[_ngcontent-%COMP%]{gap:15px!important}.horizontal-slide[_ngcontent-%COMP%]{height:100vh}}@media (min-width: 1115px){.content-boxed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%}}.hero-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.carousel-container[_ngcontent-%COMP%]{width:100%;position:relative}"],data:{animation:[R("taifLogoAnimation",[q(":enter",[h({opacity:0}),O("p",[h({opacity:0,transform:"translateY(-20px)"})]),B([w("1s",h({opacity:1})),O("p",F(950,[w("1s ease-out",h({opacity:1,transform:"translateY(0)"}))]))])])])]}})};export{K as Home};
