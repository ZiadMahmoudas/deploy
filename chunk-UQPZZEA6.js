import{a as I}from"./chunk-T32ATWVE.js";import{a as x,b as g,c as w,d as D,e as N,f as h,g as T,h as A,i as F,l as G}from"./chunk-NQUXY33H.js";import{r as E}from"./chunk-EMUXDAZT.js";import{Aa as f,Ma as a,Oa as b,Z as l,ca as c,ea as v,ia as p,jb as y,mb as C,sa as m,ta as n,ua as r,va as S,yb as _}from"./chunk-QQJZZCOM.js";function O(d,t){d&1&&(n(0,"div",18),a(1," Title is required "),r())}function H(d,t){d&1&&(n(0,"div",18),a(1," Header is required "),r())}function M(d,t){d&1&&(n(0,"div",18),a(1," Image is required "),r())}var q=class d{constructor(t,e,i){this.toastr=t;this.dashboardService=e;this.route=i;this.addSlider=new N({title:new h("",[g.required]),header:new h("",[g.required]),image:new h(null,[g.required])})}sliders=[];isEdit=!1;editSocial=null;selectedImage=null;addSlider;ngOnInit(){this.route.params.subscribe(t=>{let e=t.id;e&&(this.getSlider(e),this.isEdit=!0,this.editSocial=e)}),this.loadSliders()}getSlider(t){this.dashboardService.GetOnlyOneItem(t).subscribe({next:e=>{this.addSlider.patchValue(e)},error:e=>{this.toastr.error("Error loading slider data")}})}loadSliders(){this.dashboardService.GetAllSliderHome().subscribe({next:t=>{this.sliders=t},error:()=>{this.toastr.error("Error loading sliders")}})}onImageChange(t){this.selectedImage=t.target.files[0]}onSubmit(){if(this.addSlider.invalid){this.toastr.warning("Please fill all required fields");return}let t=this.addSlider.value;if(this.selectedImage||this.isEdit){let e=new FormData;e.append("header",t.header),e.append("title",t.title),this.selectedImage&&e.append("image",this.selectedImage),this.isEdit&&this.editSocial?this.dashboardService.UpdateSliderHome(e,this.editSocial).subscribe({next:()=>{this.toastr.success("Slider updated successfully")},error:i=>{this.toastr.error(i.error?.message||"Something went wrong")}}):this.dashboardService.CreateSliderHome(e).subscribe({next:()=>{this.toastr.success("Slider added successfully")},error:i=>{this.toastr.error(i.error?.message||"Something went wrong")}})}else this.toastr.error("Please select an image")}static \u0275fac=function(e){return new(e||d)(c(E),c(I),c(_))};static \u0275cmp=v({type:d,selectors:[["app-slider-content"]],decls:28,vars:6,consts:[[1,"this"],[1,"row","total","g-4"],[1,"col-lg-7"],[1,"card","shadow-lg","border-0","rounded-lg"],[1,"card-header","bg-primary","text-white","text-center","py-4","rounded-top"],[1,"mb-0"],[1,"fas","fa-box-open","me-2"],[1,"card-body","p-4"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","title",1,"w-100",2,"text-align","right"],["type","text","id","title","formControlName","title","placeholder","Enter slider title",1,"form-control"],["class","text-danger",4,"ngIf"],["for","header",1,"w-100",2,"text-align","right"],["type","text","id","header","formControlName","header","placeholder","Enter slider header",1,"form-control"],["for","image",1,"w-100",2,"text-align","right"],["type","file","id","image","formControlName","image",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger"]],template:function(e,i){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),S(6,"i",6),a(7),r()(),n(8,"div",7)(9,"form",8),f("ngSubmit",function(){return i.onSubmit()}),n(10,"div",9)(11,"label",10),a(12,"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0631\u0626\u064A\u0633\u064A"),r(),S(13,"input",11),p(14,O,2,0,"div",12),r(),n(15,"div",9)(16,"label",13),a(17,"\u0627\u0644\u0645\u062D\u062A\u0648\u064A"),r(),n(18,"textarea",14),a(19,"    "),r(),p(20,H,2,0,"div",12),r(),n(21,"div",9)(22,"label",15),a(23,"\u0627\u0644\u0635\u0648\u0631\u0629"),r(),n(24,"input",16),f("change",function(s){return i.onImageChange(s)}),r(),p(25,M,2,0,"div",12),r(),n(26,"button",17),a(27,"Submit"),r()()()()()()()),e&2){let o,s,u;l(7),b(" ",i.isEdit?"Update ContentHomeSlider":"Create ContentHomeSlider"," "),l(2),m("formGroup",i.addSlider),l(5),m("ngIf",((o=i.addSlider.get("title"))==null?null:o.invalid)&&((o=i.addSlider.get("title"))==null?null:o.touched)),l(6),m("ngIf",((s=i.addSlider.get("header"))==null?null:s.invalid)&&((s=i.addSlider.get("header"))==null?null:s.touched)),l(5),m("ngIf",((u=i.addSlider.get("image"))==null?null:u.invalid)&&((u=i.addSlider.get("image"))==null?null:u.touched)),l(),m("disabled",i.addSlider.invalid)}},dependencies:[G,T,x,w,D,A,F,C,y],styles:[".this[_ngcontent-%COMP%]{margin-top:70px}.total[_ngcontent-%COMP%]{width:200%;justify-content:center}"]})};export{q as SliderContent};
