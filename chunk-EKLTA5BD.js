import{a as P}from"./chunk-V6KGQEPR.js";import{r as b}from"./chunk-EMUXDAZT.js";import{Aa as f,Ab as x,Ba as p,I as m,J as u,Ma as o,Z as c,ca as d,ea as v,ia as _,jb as w,mb as h,sa as l,ta as n,ua as s,ya as g,yb as S}from"./chunk-QQJZZCOM.js";function y(r,i){if(r&1){let t=g();n(0,"div",5)(1,"p"),o(2,"Password changed successfully!"),s(),n(3,"button",6),f("click",function(){m(t);let a=p();return u(a.redirectToLogin())}),o(4,"Go to Login"),s()()}}function I(r,i){if(r&1){let t=g();n(0,"div",7)(1,"p"),o(2,"No changes were made. Please try again later."),s(),n(3,"button",6),f("click",function(){m(t);let a=p();return u(a.redirectToLogin())}),o(4,"Go to Login"),s()()}}function k(r,i){r&1&&(n(0,"div",8)(1,"p"),o(2,"Please wait, confirming password change..."),s()())}function E(r,i){if(r&1){let t=g();n(0,"div",9)(1,"p"),o(2,"Something went wrong. Please check the link or try again."),s(),n(3,"button",6),f("click",function(){m(t);let a=p();return u(a.redirectToLogin())}),o(4,"Go to Login"),s()()}}var C=class r{constructor(i,t,e,a){this.authService=i;this.router=t;this.route=e;this.toastr=a}isSuccess=!1;isError=!1;isCancel=!1;isConfirm=!1;loading=!0;ngOnInit(){this.route.queryParams.subscribe(i=>{let t=i.action,e=i.token;t&&e?this.confirmPassword(e,t):(this.toastr.error("Invalid link, please try again."),this.router.navigate(["/login"]))})}confirmPassword(i,t){this.authService.confirmPasswordChange(i,t).subscribe({next:e=>{this.loading=!1,e.message.toLowerCase().includes("success")?(this.isSuccess=!0,this.isConfirm=!0,this.toastr.success(e.message)):(this.isError=!0,this.toastr.error(e.message))},error:e=>{this.loading=!1,this.isError=!0,console.error("Error confirming password change:",e),this.toastr.error("An error occurred. Please try again.")}})}redirectToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||r)(d(P),d(x),d(S),d(b))};static \u0275cmp=v({type:r,selectors:[["app-confirm-password"]],decls:7,vars:4,consts:[[1,"confirm-password-container"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],["class","loading-message",4,"ngIf"],["class","pending-message",4,"ngIf"],[1,"success-message"],[3,"click"],[1,"error-message"],[1,"loading-message"],[1,"pending-message"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"h2"),o(2,"Confirm Your Password Change"),s(),_(3,y,5,0,"div",1)(4,I,5,0,"div",2)(5,k,3,0,"div",3)(6,E,5,0,"div",4),s()),t&2&&(c(3),l("ngIf",e.isSuccess&&e.isConfirm),c(),l("ngIf",e.isError),c(),l("ngIf",e.loading),c(),l("ngIf",!e.isSuccess&&!e.isError&&!e.loading))},dependencies:[h,w],styles:[".confirm-password-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;background-color:#f8f9fa;border-radius:8px;box-shadow:0 4px 8px #0000001a}.success-message[_ngcontent-%COMP%]{color:green;font-size:1.2rem;margin:20px 0}.error-message[_ngcontent-%COMP%]{color:red;font-size:1.2rem;margin:20px 0}.pending-message[_ngcontent-%COMP%]{color:orange;font-size:1.2rem;margin:20px 0}button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#218838}"]})};export{C as SuccessPassword};
